<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A Breath Apart</title>
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <header>
        <div class="header-container">
            <div class="dep-header">
                <img src="img/doge_logo.png" alt="Department Logo" id="logo" />
                <h1>Department of Graphics Engineering</h1>
            </div>
            <div class="title-container">
                <h1>A Breath Apart</h1>
                <h2>
                    Interactively Visualizing the Differences Between
                    Lungs Across Multiple Lung Conditions
                </h2>
                <p class="authors">
                    Gahn Wuwong, Nathaphat Taleongpong, Jonathan Gu
                </p>
            </div>
        </div>
    </header>

    <main>
        <section class="section-introduction">
            <h2>Understanding Expiratory Occlusion</h2>
            <p>
                Expiratory occlusion is a technique used to measure the
                mechanical properties of the respiratory system. This
                interactive exploration visualizes expiratory occlusions from
                80 participants with various lung conditions.
            </p>
        </section>

        <section class="section-data">
            <h2>The Data</h2>
            <p>
                We used data from the paper
                <i>Respiratory dataset from PEEP study with expiratory occlusion</i>.
                The data was collected from 80 participants with various lung
                conditions. The participants were split evenly into groups based on
                sex and lung condition as either asthmatic, smoker, vaper, or
                healthy. The information about the participants was self-reported
                as well as measured. An example of the setup is shown below.
            </p>
            <img src="img/figure-1.png" alt="Data Setup" class="data-setup" />
            <p>
                You can download the dataset
                <a href="https://physionet.org/content/respiratory-dataset/1.0.0/" target="_blank">here</a>.
            </p>
        </section>

        <section class="section-demographics">
            <h2>Participant Demographics</h2>
            <p>
                Explore the demographics breakdown of the 80 participants.
            </p>
            <div class="demographics-controls">
                <button id="view-gender">Gender</button>
                <button id="view-asthma">Asthma Status</button>
                <button id="view-smoking">Smoking History</button>
                <button id="view-vaping">Vaping History</button>
                <button id="view-age">Age Distribution</button>
            </div>
            <div id="demographics-chart"></div>
        </section>

        <section class="section-breathing">
            <h2>Respiratory Flow Visualization</h2>
            <p>
                This visualization shows breathing patterns across different participant groups.
                Positive values (above the center line) represent inhalation, while negative values represent
                exhalation.
            </p>
            <div class="breathing-controls">
                <div class="participant-selector">
                    <label for="participant-select">Select Participant: </label>
                    <select id="participant-select">
                        <!-- Options will be populated by JavaScript -->
                    </select>
                </div>

                <div class="group-selector">
                    <label>Compare Groups: </label>
                    <button class="group-btn" data-group="all">All</button>
                    <button class="group-btn active" data-group="normal">Normal</button>
                    <button class="group-btn" data-group="asthma">Asthma</button>
                    <button class="group-btn" data-group="smoker">Smoker</button>
                    <button class="group-btn" data-group="vaper">Vaper</button>
                </div>

                <div class="speed-control">
                    <label for="speed-slider">Animation Speed: </label>
                    <input type="range" id="speed-slider" min="0.5" max="5" step="0.5" value="1">
                    <span id="speed-value">1x</span>
                </div>
            </div>

            <div class="viz-container" id="breathing-container">
                <!-- Hidden for prototype -->
                <div class="circle-viz-container" style="display: none;">
                    <div class="main-viz" id="lung-viz">
                        <!-- Lung circle graph -->
                    </div>
                    <div class="main-viz" id="chest-viz">
                        <!-- Chest & abdomen circle graph -->
                    </div>
                </div>
                
                <div class="main-viz" id="breathing-viz"></div>
            </div>

            <div class="stats-panel">
                <div class="stat-box">
                    <h3>Current Flow</h3>
                    <div id="current-flow">0.00 L/s</div>
                </div>
                <div class="stat-box">
                    <h3>Current Volume</h3>
                    <div id="current-volume">0.00 L</div>
                </div>
                <div class="stat-box">
                    <h3>Breathing Rate</h3>
                    <div id="breathing-rate">0 breaths/min</div>
                </div>
            </div>

            <div class="breathing-legend">
                <!-- Legend will be populated by JavaScript -->
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-container">
            <div class="dep-credits">
                <img src="img/doge_logo.png" alt="Department Logo" id="footer-logo" />
                <h3>Department of Graphics Engineering</h3>
            </div>
            <p>
                Created with D3.js | Data from
                <a href="https://physionet.org/content/respiratory-dataset/1.0.0/" target="_blank">physionet</a>
            </p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="demographics.js"></script>
    <script src="breathing.js"></script>
</body>

</html>